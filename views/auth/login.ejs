<section class="landing-hero" role="region" aria-labelledby="landing-hero-heading">
  <figure class="landing-hero__media" aria-hidden="true">
    <svg class="landing-hero__svg" viewBox="0 0 320 260" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="landing-gradient-slate" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stop-color="#dfe7ff" />
          <stop offset="100%" stop-color="#eff3ff" />
        </linearGradient>
        <linearGradient id="landing-gradient-blue" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#2f66f5" />
          <stop offset="100%" stop-color="#1a4fd9" />
        </linearGradient>
        <linearGradient id="landing-gradient-green" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#5fc982" />
          <stop offset="100%" stop-color="#36a761" />
        </linearGradient>
      </defs>
      <g fill="none" fill-rule="evenodd">
        <rect x="54" y="26" width="170" height="210" rx="26" fill="url(#landing-gradient-slate)" />
        <rect x="88" y="52" width="102" height="18" rx="9" fill="#2f66f5" opacity="0.85" />
        <rect x="82" y="94" width="114" height="16" rx="8" fill="#9bb6ff" />
        <rect x="82" y="128" width="114" height="16" rx="8" fill="#9bb6ff" opacity="0.7" />
        <rect x="82" y="162" width="114" height="16" rx="8" fill="#9bb6ff" opacity="0.5" />
        <circle cx="228" cy="108" r="64" fill="#ffb98a" />
        <path d="M196 182c6-24 26-40 48-40s42 16 48 40v44H196v-44z" fill="#2f66f5" opacity="0.92" />
        <g transform="translate(32 190)">
          <rect x="0" y="0" width="84" height="52" rx="20" fill="url(#landing-gradient-green)" />
          <rect x="104" y="10" width="84" height="52" rx="20" fill="url(#landing-gradient-green)" opacity="0.7" />
        </g>
        <path d="M250 38l20 10-20 10-10 20-10-20-20-10 20-10 10-20z" fill="url(#landing-gradient-blue)" opacity="0.4" />
        <path d="M110 210l18 6-12 16z" fill="#2f66f5" opacity="0.25" />
      </g>
    </svg>
  </figure>
  <div class="landing-hero__body">
    <p class="landing-hero__eyebrow">Sign In to Your Account</p>
    <h2 id="landing-hero-heading" class="landing-hero__heading">Access assigned test cases, execute audits, and submit reviewer insights in one place.</h2>
    <p class="landing-hero__text">Track the progress of your Technical Quality Audit tasks, verify remediation steps, and keep engineering stakeholders informed.</p>
    <button type="button" class="landing-button landing-button--primary" data-open-modal data-role="reviewer">
      <span>Sign In</span>
      <span aria-hidden="true" class="landing-button__arrow"></span>
    </button>
  </div>
</section>

<section class="landing-cards" aria-label="Role sign in">
  <article class="landing-card">
    <div class="landing-card__header">
      <div class="landing-card__icon" aria-hidden="true">
        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <rect x="8" y="6" width="32" height="30" rx="10" fill="#b7c9ff" />
          <path d="M18 18c0-3.314 2.686-6 6-6s6 2.686 6 6-2.686 6-6 6-6-2.686-6-6z" fill="#ffffff" />
          <path d="M14 32c2.4-4 6.4-6 10-6s7.6 2 10 6v6H14v-6z" fill="#2f66f5" />
          <circle cx="36" cy="14" r="6" fill="#2f66f5" />
          <path d="M36 11v6" stroke="#ffffff" stroke-width="2.5" stroke-linecap="round" />
          <path d="M33 14h6" stroke="#ffffff" stroke-width="2.5" stroke-linecap="round" />
        </svg>
      </div>
      <div class="landing-card__body">
        <h3 class="landing-card__title">Reviewer</h3>
        <p class="landing-card__description">Access assigned test cases, execute audits, and submit actionable insights to improve delivery quality.</p>
      </div>
    </div>
    <button type="button" class="landing-button landing-button--outline landing-card__cta" data-open-modal data-role="reviewer">Sign In</button>
  </article>

  <article class="landing-card">
    <div class="landing-card__header">
      <div class="landing-card__icon" aria-hidden="true">
        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <rect x="6" y="6" width="36" height="28" rx="6" fill="#ffd188" />
          <rect x="10" y="12" width="12" height="10" rx="3" fill="#fff2d2" />
          <rect x="26" y="12" width="12" height="5" rx="2" fill="#fff2d2" />
          <rect x="26" y="20" width="12" height="5" rx="2" fill="#fff2d2" opacity="0.7" />
          <path d="M18 32h12l-6 10z" fill="#2f66f5" />
          <circle cx="36" cy="34" r="8" fill="#2f66f5" />
          <path d="M36 30v8" stroke="#ffffff" stroke-width="2.5" stroke-linecap="round" />
          <path d="M32 34h8" stroke="#ffffff" stroke-width="2.5" stroke-linecap="round" />
        </svg>
      </div>
      <div class="landing-card__body">
        <h3 class="landing-card__title">Product Owner</h3>
        <p class="landing-card__description">Manage test cycles, monitor key metrics, approve releases, and track QA progress with targeted dashboards.</p>
      </div>
    </div>
    <button type="button" class="landing-button landing-button--outline landing-card__cta" data-open-modal data-role="productOwner">Sign In</button>
  </article>

  <article class="landing-card">
    <div class="landing-card__header">
      <div class="landing-card__icon" aria-hidden="true">
        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <rect x="6" y="8" width="36" height="28" rx="6" fill="#9ec4ff" />
          <rect x="12" y="14" width="24" height="16" rx="8" fill="#ffffff" />
          <circle cx="24" cy="20" r="5" fill="#9ec4ff" />
          <path d="M14 30h20" stroke="#9ec4ff" stroke-width="3" stroke-linecap="round" />
          <path d="M10 6h28l4 6H6z" fill="#2f66f5" />
          <circle cx="14" cy="6" r="3" fill="#2f66f5" />
        </svg>
      </div>
      <div class="landing-card__body">
        <h3 class="landing-card__title">Admin</h3>
        <p class="landing-card__description">Administer users, configure systems, generate reports, and maintain audit integrity across product lines.</p>
      </div>
    </div>
    <button type="button" class="landing-button landing-button--outline landing-card__cta" data-open-modal data-role="admin">Sign In</button>
  </article>
</section>

<div id="signin-modal" class="landing-modal" aria-hidden="true">
  <div class="landing-modal__overlay" data-dismiss-modal></div>
  <div class="landing-modal__panel" role="dialog" aria-modal="true" aria-labelledby="signin-heading">
    <button type="button" id="modal-close" class="landing-modal__close" aria-label="Close sign in dialog"></button>
    <h2 id="signin-heading" class="landing-modal__title">Sign in</h2>
    <p class="landing-modal__subtitle">You are signing in as <span id="selected-role-label" class="landing-modal__role">Reviewer</span>.</p>
    <form class="landing-form" method="post" action="/login" id="signin-form">
      <input type="hidden" id="role" name="role" value="reviewer">
      <label for="email">Work email</label>
      <input id="email" name="email" type="email" placeholder="reviewer@example.com" required>
      <label for="password">Password</label>
      <input id="password" name="password" type="password" placeholder="TqaDemo@2025" required>
      <button type="submit" class="landing-button landing-button--primary landing-button--full">
        <span>Continue</span>
        <span aria-hidden="true" class="landing-button__arrow"></span>
      </button>
    </form>
    <script>
      // When the modal is used for the reviewer role, submit to demo login to set session
      (function(){
        const form = document.getElementById('signin-form');
        const roleInput = document.getElementById('role');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        form.addEventListener('submit', function(ev){
          const roleVal = roleInput ? roleInput.value.toLowerCase() : '';
          if(roleVal === 'reviewer'){
            // Post to demo login route with email/password to set session
            form.setAttribute('action', '/login-demo');
            // allow submit to proceed
          }
        });
      })();
    </script>
    <p class="landing-modal__helper">We&apos;ll tailor the workspace to your TQA responsibilities. Passwords are not required in this environment.</p>
  </div>
</div>

<script>
  (function () {
    const modal = document.getElementById('signin-modal');
    const closeBtn = document.getElementById('modal-close');
    const overlay = modal.querySelector('[data-dismiss-modal]');
    const roleInput = document.getElementById('role');
    const roleLabel = document.getElementById('selected-role-label');
    const emailInput = document.getElementById('email');
    const triggers = Array.from(document.querySelectorAll('[data-open-modal]'));

    const roleNames = {
      reviewer: 'Reviewer',
      productOwner: 'Product Owner',
      admin: 'Admin'
    };

    let activeRole = 'reviewer';

    const setRole = (role) => {
      activeRole = roleNames[role] ? role : 'reviewer';
      roleInput.value = activeRole;
      roleLabel.textContent = roleNames[activeRole];
    };

    const openModal = (role = 'reviewer') => {
      setRole(role);
      modal.classList.remove('landing-modal--closing');
      modal.classList.add('landing-modal--visible');
      modal.setAttribute('aria-hidden', 'false');
      setTimeout(() => {
        emailInput.focus();
      }, 100);
    };

    const closeModal = () => {
      if (!modal.classList.contains('landing-modal--visible')) {
        return;
      }
      modal.classList.add('landing-modal--closing');
      setTimeout(() => {
        modal.classList.remove('landing-modal--visible', 'landing-modal--closing');
        modal.setAttribute('aria-hidden', 'true');
      }, 220);
    };

    triggers.forEach((trigger) => {
      trigger.addEventListener('click', () => {
        const role = trigger.getAttribute('data-role');
        openModal(role);
      });
    });

    [closeBtn, overlay].forEach((el) => {
      if (el) {
        el.addEventListener('click', closeModal);
      }
    });

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && modal.classList.contains('landing-modal--visible')) {
        closeModal();
      }
    });

    setRole(activeRole);
  })();
</script>
